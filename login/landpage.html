<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Welcome Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 60px auto;
      padding: 20px;
    }
    .card {
      padding: 20px;
      border-radius: 10px;
      background-color: #f1f1f1;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }
    #rememberContainer {
      margin-top: 20px;
    }
    #logout {
      margin-top: 30px;
      background-color: #e74c3c;
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2 id="welcomeText">Welcome!</h2>
    <p id="userInfo"></p>

    <div id="rememberContainer">
      <label>
        <input type="checkbox" id="rememberMe" />
        Remember me on this device
      </label>
    </div>

    <button id="logout">Logout</button>
  </div>

  <script>
    // ดึง query param
    const params = new URLSearchParams(window.location.search);
    const email = params.get("user");

    const welcomeEl = document.getElementById("welcomeText");
    const infoEl = document.getElementById("userInfo");
    const rememberCheckbox = document.getElementById("rememberMe");

    if (email) {
      welcomeEl.textContent = `Welcome, ${email}`;
      
      // หาผู้ใช้ใน localStorage
      const users = JSON.parse(localStorage.getItem("users") || "[]");
      const user = users.find(u => u.email === email);

      if (user) {
        infoEl.innerHTML = `
          <strong>Email:</strong> ${user.email}<br/>
          <strong>Password:</strong> ${user.password}
        `;
      } else {
        infoEl.textContent = "User not found in localStorage.";
      }

      // โหลดสถานะ remember me
      const remembered = localStorage.getItem("rememberedEmail");
      if (remembered === email) {
        rememberCheckbox.checked = true;
      }

      // กด Remember Me
      rememberCheckbox.addEventListener("change", function () {
        if (this.checked) {
          localStorage.setItem("rememberedEmail", email);
        } else {
          localStorage.removeItem("rememberedEmail");
        }
      });

    } else {
      welcomeEl.textContent = "No user found.";
    }

    // ปุ่ม Logout
    document.getElementById("logout").onclick = function () {
      window.location.href = "index.html";
    };
  </script>

</body>
</html>
